<!doctype html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="爱生活，爱的的">
<meta property="og:url" content="https://chenjx.cn/page/2/index.html">
<meta property="og:site_name" content="爱生活，爱的的">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="爱生活，爱的的">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://chenjx.cn/page/2/"/>





  <title>爱生活，爱的的</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">爱生活，爱的的</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/me.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="https://chenjx.cn" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            网站
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/12/small-skills/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/small-skills/" itemprop="url">JavaScript的奇技淫巧</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-02T13:00:31+08:00">
                2016-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-百度网盘自定义分享密码"><a href="#1-百度网盘自定义分享密码" class="headerlink" title="1. 百度网盘自定义分享密码"></a>1. 百度网盘自定义分享密码</h2><p><em>学习自<a href="https://laod.cn/black-technology/baidu-wangpan-tiquma.html" target="_blank" rel="external">老D</a></em> </p>
<p>百度网盘私密分享的文件不容易被取消，可是提取的时候要输入4个字符的提取码。<br>如果能自定义提取码是不是很美妙呢？ //给妹子分享文件告诉她提取码是她生日^^</p>
<p>方法在这里，按照步骤来：</p>
<h4 id="1-选中文件，点击分享。先不要点私密分享！"><a href="#1-选中文件，点击分享。先不要点私密分享！" class="headerlink" title="1. 选中文件，点击分享。先不要点私密分享！"></a>1. 选中文件，点击分享。先不要点私密分享！</h4><h4 id="2-Ctrl-Alt-I（或F12）打开浏览器的控制台，在Console页粘贴如下代码并回车。"><a href="#2-Ctrl-Alt-I（或F12）打开浏览器的控制台，在Console页粘贴如下代码并回车。" class="headerlink" title="2. Ctrl+Alt+I（或F12）打开浏览器的控制台，在Console页粘贴如下代码并回车。"></a>2. Ctrl+Alt+I（或F12）打开浏览器的控制台，在<code>Console</code>页粘贴如下代码并回车。</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">javascript:<span class="built_in">require</span>([<span class="string">"function-widget-1:share/util/service/createLinkShare.js"</span>]).prototype.makePrivatePassword=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> prompt(<span class="string">"请输入提取码"</span>,<span class="string">"1024"</span>)&#125;</div></pre></td></tr></table></figure>
<h4 id="3-点击私密分享，在弹出框中输入4个字符，中文占3个字符。"><a href="#3-点击私密分享，在弹出框中输入4个字符，中文占3个字符。" class="headerlink" title="3. 点击私密分享，在弹出框中输入4个字符，中文占3个字符。"></a>3. 点击私密分享，在弹出框中输入4个字符，中文占3个字符。</h4><p>实在不明白可以看老D的<a href="https://laod.cn/black-technology/baidu-wangpan-tiquma.html" target="_blank" rel="external">原文</a>，有动图。<br>不要问我为什么默认是1024。不要想歪。</p>
<h2 id="2-使用多行字符串"><a href="#2-使用多行字符串" class="headerlink" title="2. 使用多行字符串"></a>2. 使用多行字符串</h2><p>学习自： <a href="http://www.cnblogs.com/ziyunfei/archive/2012/10/04/2711551.html" target="_blank" rel="external">http://www.cnblogs.com/ziyunfei/archive/2012/10/04/2711551.html</a><br><figure class="highlight js"><figcaption><span>line-numbers</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hereDoc</span>(<span class="params">f</span>) </span>&#123;　</div><div class="line">    <span class="keyword">return</span> f.toString().replace(<span class="regexp">/^[^\/]+\/\*!?\s?/</span>, <span class="string">''</span>).replace(<span class="regexp">/\*\/[^\/]+$/</span>, <span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> string = hereDoc(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*</span></div><div class="line">我</div><div class="line">你</div><div class="line">他</div><div class="line">*/&#125;);</div><div class="line"><span class="built_in">console</span>.log(string);</div></pre></td></tr></table></figure></p>
<p>我的简化版<br><figure class="highlight js"><figcaption><span>line-numbers</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> multiline = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">/*</span></div><div class="line">"shaungyinhao"</div><div class="line">'danyinhao'</div><div class="line">*/&#125;).toString().slice(<span class="number">16</span>, <span class="number">-3</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(multiline);</div></pre></td></tr></table></figure></p>
<p>将-3改为-5则去掉最后的换行。</p>
<p>javascript函数转字符串的格式固定，这里使用硬编码没有问题。</p>
<h2 id="3-获取中文日期和时间"><a href="#3-获取中文日期和时间" class="headerlink" title="3. 获取中文日期和时间"></a>3. 获取中文日期和时间</h2><p>这不是什么难题，但是传统的方法是通过Date对象的getYear等函数得到日期时间的各部分数字，然后再拼凑起来。其实有更简便的方法，利用JavaScript的toLocaleString格式化成不同区域的标准。如果还需要进一步格式化，使用字符串替换也可以实现大多数需求。如下<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 普通格式</span></div><div class="line">(<span class="keyword">new</span> <span class="built_in">Date</span>()).toLocaleString(<span class="string">'zh-CN'</span>, &#123; <span class="attr">hour12</span> : <span class="literal">false</span> &#125;)</div><div class="line"><span class="comment">// 进一步替换</span></div><div class="line">(<span class="keyword">new</span> <span class="built_in">Date</span>()).toLocaleString(<span class="string">'zh-CN'</span>, &#123; <span class="attr">hour12</span> : <span class="literal">false</span> &#125;).replace(<span class="regexp">/[\/|-]/</span>, <span class="string">'年'</span>).replace(<span class="regexp">/[\/|-]/</span>, <span class="string">'月'</span>).replace(<span class="regexp">/ /</span>, <span class="string">'日 '</span>)</div></pre></td></tr></table></figure></p>
<p>得到结果如下：（可在不同浏览器访问本页检查兼容性）<br><a href="javascript:$('#date1').html((new Date()).toLocaleString('zh-CN', { hour12 : false }));$('#date2').html((new Date()).toLocaleString('zh-CN', { hour12 : false }).replace(/[\/|-]/, '年').replace(/[\/|-]/, '月').replace(/ /, '日 '))" target="_blank" rel="external">显示结果</a><br>普通格式：<span id="date1"></span><br>替换后：<span id="date2"></span><br></p>
<h2 id="4-生成随机字符串"><a href="#4-生成随机字符串" class="headerlink" title="4. 生成随机字符串"></a>4. 生成随机字符串</h2><ul>
<li>生成随机数用<code>Math.random()</code>就可以了。得到的是0~1的随机数。</li>
<li><p>如果需要得到一定范围内<code>[minNum, minNum+range)</code>的随机整数，用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * range) + minNum;</div></pre></td></tr></table></figure>
</li>
<li><p>如果需要得到随机字符串呢？一种非常简便的做法是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>得到的是数字和小写字母组成的随机字符串。其中36表示进制，支持2~36，默认10。机智的你应该很快发现，当这个数为奇数时，生成的字符串会特别长。这种方法最大的局限就是最多只能包括小写字母，不能大小写混合。</p>
<ul>
<li>手动实现，支持任意字符集。代码就很难看了，不如一行风骚。<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> chars = <span class="string">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'</span>.split(<span class="string">''</span>);</div><div class="line"><span class="keyword">var</span> key = <span class="string">""</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; config.length; i++) &#123;</div><div class="line">    key += chars[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*chars.length)];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>这段代码是我为了生成随机的二维码的key写的，类似短网址，为了尽量缩短字符串长度，使用了62个字符。</p>
<h2 id="5-Excel列名"><a href="#5-Excel列名" class="headerlink" title="5. Excel列名"></a>5. Excel列名</h2><p>Excel表格里面，列的名字是A~Z，但又不是简单的26进制，因为Z的下一个是AA，因此A既不是0也不是1。于是写了个函数，传入列的数字编号，得到Excel风格的列名。 传入0或负数不会出错。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1 =&gt; A, 26 =&gt; Z, 27 = AA</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">excelColName</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = <span class="string">''</span>;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        c = <span class="built_in">String</span>.fromCharCode(--n % <span class="number">26</span> + <span class="number">65</span>) + c;</div><div class="line">    &#125; <span class="keyword">while</span>(n = <span class="built_in">Math</span>.floor(n / <span class="number">26</span>) &gt; <span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> c;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/10/h5ai/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/h5ai/" itemprop="url">h5ai 目录列表程序的搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-28T12:27:18+08:00">
                2016-10-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://larsjung.de/h5ai/" target="_blank" rel="external">h5ai</a>是一个强大美观的目录列表程序。我第一次看到它的时候就喜欢上了，这不就是我想要实现的东西吗？<br><img src="/content/images/2016/10/----20161028202839.png" alt=""></p>
<p>好了，造轮子不如搬过来直接用。</p>
<p>要求PHP环境，如果没有php而系统是ubuntu16.04，可以直接<code>apt install php</code>装一个。注意h5ai只是一个列出文件和文件夹的程序，获取文件需要文件服务器。这里使用nginx，其他服务器可看官方教程。</p>
<h2 id="下载h5ai"><a href="#下载h5ai" class="headerlink" title="下载h5ai"></a>下载h5ai</h2><p>官网地址： <a href="https://larsjung.de/h5ai/" target="_blank" rel="external">https://larsjung.de/h5ai/</a> 。点击右边的下载按钮得到压缩包，解压到你的网站根目录下。文件列表如下图：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">DOC_ROOT</div><div class="line"> ├─ _h5ai</div><div class="line"> ├─ your files</div><div class="line"> └─ and folders</div></pre></td></tr></table></figure></p>
<h2 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h2><p>php部分需要根据php-fpm的配置来设置，这里使用的是apt安装得到的默认配置。php版本：7.0.8 。_h5ai/private这个文件夹最好保护起来。<br><figure class="highlight js"><figcaption><span>line-numbers</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       <span class="number">80</span>;</div><div class="line">    server_name  example.com；</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        root         html;</div><div class="line">        index        index.html /_h5ai/public/index.php;</div><div class="line">    &#125;</div><div class="line">    location /_h5ai/private &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">403</span>;</div><div class="line">    &#125;</div><div class="line">    location ~ \.php$ &#123;</div><div class="line">        root           html;</div><div class="line">        fastcgi_pass   unix:<span class="regexp">/run/</span>php/php7<span class="number">.0</span>-fpm.sock;</div><div class="line">        fastcgi_index  index.php;</div><div class="line">        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</div><div class="line">        include        fastcgi_params;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="其他设置"><a href="#其他设置" class="headerlink" title="其他设置"></a>其他设置</h2><p>修改 _h5ai/private/conf/options.json 进一步设置h5ai。例如修改passhash，默认为空密码的hash。以及修改默认语言为中文。如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&quot;l10n&quot;: &#123;</div><div class="line">    &quot;enabled&quot;: true,</div><div class="line">    &quot;lang&quot;: &quot;zh-cn&quot;,</div><div class="line">    &quot;useBrowserLang&quot;: true</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>成果 –&gt; <a href="https://download.chenjx.cn" target="_blank" rel="external">https://download.chenjx.cn</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/09/make-google-mirror2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/make-google-mirror2/" itemprop="url">使用nginx制作镜像站</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-12T09:59:09+08:00">
                2016-09-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>利用反向代理工具nginx可以为一些需要的网站制作镜像站，以加快其访问速度。本篇以谷歌为例，意在交流其中的互联网知识，不提供面向大众的服务。</p>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>镜像站在数据传输层面和CDN相似，都是基于反向代理，简单说客户浏览器访问镜像站，镜像站将request转发到源站，再将源站的response发送给客户。其中，request的数据包需要根据源站的要求作出改变，至少需要将host替换为源站的host。Useragent也同样需要传给源站，以便其提供适合用户客户端的网页。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">location / &#123;</div><div class="line">    proxy_set_header  Host  <span class="string">"www.google.com.hk"</span>;</div><div class="line">    proxy_set_header  User-Agent $http_user_agent;</div><div class="line">    proxy_set_header  Connection <span class="string">""</span>;</div><div class="line">    proxy_http_version <span class="number">1.1</span>;</div><div class="line">    proxy_pass https:<span class="comment">//www.google.com.hk;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>完成以上的基础配置，就得到了一个可以访问的镜像站。</p>
<h2 id="完善（负载均衡）【已失效】"><a href="#完善（负载均衡）【已失效】" class="headerlink" title="完善（负载均衡）【已失效】"></a>完善（负载均衡）【已失效】</h2><p>16年12月份起，负载均衡似乎毫无作用。<br>~~<br>如果你的镜像站访问频率较高，这时谷歌会返回一个可能带有验证码的403页面。利用负载均衡可以有效的减少这种情况发生的频率。首先，你需要找到多个谷歌的ip地址。使用nslookup可以查找到几个ip地址，如果还不够，可以试着在同个ip段探测。使用nmap、wget即可批量探测。推荐一个扫描google ip的神器：<a href="https://github.com/yinqiwen/gscan" target="_blank" rel="external">gscan</a>。然后将得到的ip地址作为upstream。详细教程请搜索“nginx负载均衡”。注意：如果一开始就出现403页面，应该考虑更换你的服务器的ip地址。<br>~~</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">upstream google &#123;</div><div class="line">    server www.google.com.hk:<span class="number">443</span> backup;</div><div class="line">    server <span class="number">74.125</span><span class="number">.130</span><span class="number">.17</span>:<span class="number">443</span>;</div><div class="line">    server <span class="number">74.125</span><span class="number">.130</span><span class="number">.18</span>:<span class="number">443</span>;</div><div class="line">    server <span class="number">74.125</span><span class="number">.130</span><span class="number">.19</span>:<span class="number">443</span>;</div><div class="line">&#125;</div><div class="line">location / &#123;</div><div class="line">    proxy_set_header  Host  <span class="string">"www.google.com.hk"</span>;</div><div class="line">    proxy_set_header  User-Agent $http_user_agent;</div><div class="line">    proxy_set_header  Connection <span class="string">""</span>;</div><div class="line">    proxy_http_version <span class="number">1.1</span>;</div><div class="line">    proxy_pass https:<span class="comment">//google;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="进阶（CDN和HTTPS）"><a href="#进阶（CDN和HTTPS）" class="headerlink" title="进阶（CDN和HTTPS）"></a>进阶（CDN和HTTPS）</h2><p>使用https为搜索加密是极为重要的，否则你的域名很难长期使用，甚至可能因为搜索了某个关键词而被屏蔽。使用cdn则能够为你的镜像站做ip保护和加速。目前免费的cdn不少，<a href="https://www.cloudflare.com/" target="_blank" rel="external">cloudflare</a>虽然速度不是特别快，但是综合体验不错。并且其“flexible”模式的https不要求你拥有ssl证书，只要域名规范即可开启。成功开启https后，建议强制使用https。做法可以在nginx里面写个rewrite，也可以直接在cloudflare的Page Rules添加一条规则。将<code>http://example.com/*</code> 转发（建议301）到<code>https://example.com/$1</code>。</p>
<h2 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h2><p>谷歌镜像站已经做好了，但是搜索出来的例如维基百科却仍然无法打开。稍微修改一下返回的页面，就能将维基百科跳转到自己的维基镜像。这里推荐使用网页内容替换的方法，用到了nginx第三方模块<code>ngx_http_substitutions_filter_module</code>。安装和使用方法请看<a class="external" href="https://github.com/yaoweibin/ngx_http_substitutions_filter_module" target="_blank" rel="external">Github</a>。这里重点提一下，替换的内容必须是没有压缩的，而不压缩会消耗更多流量。两全的方法是将压缩的内容利用nginx的gunzip模块解压。参考：<a href="https://www.v2ex.com/t/234923" target="_blank" rel="external">https://www.v2ex.com/t/234923</a> 。</p>
<h2 id="流量限制的临时解决办法——Cookie"><a href="#流量限制的临时解决办法——Cookie" class="headerlink" title="流量限制的临时解决办法——Cookie"></a>流量限制的临时解决办法——Cookie</h2><p>前面说到，为了避免出现谷歌的流量限制，应该寻找多个（我用了一千多个）谷歌ip作为upstream。但是如果还是超过了限制，下面有一个小技巧可以在出现限制的时候继续访问。出现限制的时候应该是跳转到一个<code>https://ipv4.google.com/sorry/index?continue=</code>开头的网址。首先，使用<strong>和代理服务器相同ip</strong>的vpn打开这个网址，出现验证码，输入验证码，成功弹出搜索。然后记录下此时的cookie（打开浏览器控制台，输入document.cookie回车）。最后，把这个cookie配置到nginx反代的header里，类似如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">proxy_set_header  Cookie  <span class="string">"GOOGLE_ABUSE_EXEMPTION=ID=&lt;...&gt;"</span>;</div></pre></td></tr></table></figure></p>
<p>最后，别忘了在Cookie失效后更新Cookie或去掉这句话。一次流量限制持续6小时。</p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>最后附上完整配置文件，稍微修改即可使用<br><figure class="highlight"><figcaption><span>line-numbers</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">worker_processes  1;</div><div class="line">worker_rlimit_nofile 65536;</div><div class="line">error_log  logs/error.log;</div><div class="line">pid        logs/nginx.pid;</div><div class="line"></div><div class="line">events &#123;</div><div class="line">    worker_connections  1024;</div><div class="line">&#125;</div><div class="line"></div><div class="line">http &#123;</div><div class="line">    charset  utf-8;</div><div class="line">    include       mime.types;</div><div class="line">    default_type  application/octet-stream;</div><div class="line">    access_log  logs/access.log;</div><div class="line">    sendfile        on;</div><div class="line">    keepalive_timeout  65;</div><div class="line">    gzip on;</div><div class="line">    gzip_min_length 1k;</div><div class="line">    gzip_buffers    4 16k;</div><div class="line">    gzip_http_version 1.0;</div><div class="line">    gzip_comp_level 6;</div><div class="line">    gzip_types text/plain text/css text/javascript application/json application/javascript application/x-javascript application/xml;</div><div class="line">    gzip_vary on;</div><div class="line">    client_max_body_size   10m;</div><div class="line">    client_body_buffer_size   256k;</div><div class="line">    proxy_buffer_size   64k;</div><div class="line">    proxy_buffers   4 512k;</div><div class="line">    proxy_busy_buffers_size   1024k;</div><div class="line">    server &#123;</div><div class="line">        listen       443 ssl;</div><div class="line">        server_name  guso.ml;</div><div class="line">        ssl_certificate /your/dir/to/pemOrCrt;</div><div class="line">        ssl_certificate_key /your/dir/to/key;</div><div class="line">        access_log off;</div><div class="line">        error_log off;</div><div class="line"></div><div class="line">        location / &#123;</div><div class="line">            subs_filter 'https://maps.google.com' 'http://www.google.cn';</div><div class="line">            subs_filter 'https:\/\/maps.google.com' 'http:\/\/www.google.cn';</div><div class="line">            subs_filter 'translate.google.com' 'translate.google.cn';</div><div class="line">            subs_filter_types application/json;</div><div class="line"></div><div class="line">            # remove the line below when your server is in Amarica</div><div class="line">            set $args "$&#123;args&#125;&amp;gws_rd=cr";</div><div class="line">            proxy_cookie_domain google.com guso.ml;</div><div class="line">            proxy_redirect https://www.google.com https://guso.ml;</div><div class="line">            proxy_redirect http://www.google.com https://guso.ml;</div><div class="line">            proxy_set_header  Accept-Encoding "";</div><div class="line">            proxy_set_header  Host  "www.google.com";</div><div class="line">            proxy_set_header  User-Agent $http_user_agent;</div><div class="line">            proxy_set_header  Connection "";</div><div class="line">            proxy_http_version 1.1;</div><div class="line">            proxy_pass http://unix:/var/run/google.sock;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    upstream google &#123;</div><div class="line">        server 118.98.106.212:443;</div><div class="line">        server 118.98.106.217:443;</div><div class="line">        server 118.98.106.231:443;</div><div class="line">        # add more servers here</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    server &#123;</div><div class="line">        listen unix:/var/run/google.sock;</div><div class="line">        server_name www.google.com;</div><div class="line">        proxy_set_header Accept-Encoding gzip;</div><div class="line">        proxy_set_header  Host  "www.google.com";</div><div class="line">        gunzip on;</div><div class="line"></div><div class="line">        # 使用ipv4.google.com避免走ipv6导致出错</div><div class="line">        location / &#123;</div><div class="line">            proxy_pass https://ipv4.google.com;</div><div class="line">        &#125;</div><div class="line">        # 只对/search做负载均衡，兼具速度和稳定</div><div class="line">        location /search &#123;</div><div class="line">            proxy_pass  https://google;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>–更新于12月7日–</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/07/ubuntu-server-xrdp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/ubuntu-server-xrdp/" itemprop="url">Ubuntu Server 安装xrdp使用图形界面 (16.04/14.04)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-29T12:17:34+08:00">
                2016-07-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、安装xrdp"><a href="#一、安装xrdp" class="headerlink" title="一、安装xrdp"></a>一、安装xrdp</h2><p>Ubuntu 16.04只需安装xrdp即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install xrdp</div></pre></td></tr></table></figure></p>
<p>Ubuntu 14.04还需安装vnc4server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install xrdp vnc4server</div></pre></td></tr></table></figure></p>
<p>此时使用客户端连接，应该能够连接成功。</p>
<p>Ubuntu 16.04出现命令行画面。</p>
<p>Ubuntu 14.04画面为空白。</p>
<h2 id="二、安装兼容的桌面环境"><a href="#二、安装兼容的桌面环境" class="headerlink" title="二、安装兼容的桌面环境"></a>二、安装兼容的桌面环境</h2><p>兼容的桌面环境有gnome-classic，xfce，mate等</p>
<p>Unity不兼容。</p>
<p>以下两种任选其一。</p>
<h3 id="1、精简小巧的xfce"><a href="#1、精简小巧的xfce" class="headerlink" title="1、精简小巧的xfce"></a>1、精简小巧的xfce</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install xfce4</div></pre></td></tr></table></figure>
<p><img src="/content/images/2016/07/---2.JPG" alt=""><br>这是xubuntu的桌面核心部分。</p>
<h3 id="2、精美易定制的mate"><a href="#2、精美易定制的mate" class="headerlink" title="2、精美易定制的mate"></a>2、精美易定制的mate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install mate-core mate-desktop-environment mate-notification-daemon</div></pre></td></tr></table></figure>
<p><img src="/content/images/2016/08/--.JPG" alt=""></p>
<h2 id="三、使用客户端连接"><a href="#三、使用客户端连接" class="headerlink" title="三、使用客户端连接"></a>三、使用客户端连接</h2><p>win10可用自带的“远程桌面连接”。</p>
<p>Linux推荐使用Remmina。</p>
<h2 id="四、解决其他问题"><a href="#四、解决其他问题" class="headerlink" title="四、解决其他问题"></a>四、解决其他问题</h2><h3 id="1、中文字体缺失"><a href="#1、中文字体缺失" class="headerlink" title="1、中文字体缺失"></a>1、中文字体缺失</h3><p>Ubuntu14.04安装fonts-droid:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install fonts-droid</div></pre></td></tr></table></figure></p>
<p>Ubuntu16.04安装fonts-noto-cjk:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install fonts-noto-cjk</div></pre></td></tr></table></figure></p>
<h3 id="2、xfce中terminal中tab键失效"><a href="#2、xfce中terminal中tab键失效" class="headerlink" title="2、xfce中terminal中tab键失效"></a>2、xfce中terminal中tab键失效</h3><p>在菜单中找到“Window Manager”或终端执行<code>xfwm4-settings</code>打开窗口管理器，在<code>keyboard</code>标签下将<code>Switch window for same application</code>的快捷键清除。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/07/vpn-1key/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/vpn-1key/" itemprop="url">几种VPN的一键安装脚本</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-22T16:59:44+08:00">
                2016-07-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>搭建各种VPN的方法网络上已经有很多教程了，本文提供的是一键安装脚本，一是为了使用方便，二是稍有基础的同学直接阅读脚本便知步骤。或许这是程序员间最好的沟通方式。</p>
<h2 id="一、Shadowsocks"><a href="#一、Shadowsocks" class="headerlink" title="一、Shadowsocks"></a>一、Shadowsocks</h2><blockquote>
<p>支持Ubuntu、Debian、CentOS  </p>
</blockquote>
<p>直接安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://raw.githubusercontent.com/junolym/script/master/shadowsocks/sspy.sh &amp;&amp; sudo bash sspy.sh</div></pre></td></tr></table></figure></p>
<p><a class="external" href="https://github.com/junolym/script/blob/master/shadowsocks/sspy.sh" target="_blank">Github</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="keyword">if</span> [ `id -u` -ne 0 ]; <span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"please run it as super user"</span></div><div class="line">    <span class="built_in">exit</span> 0</div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># set PKM (package manager)</span></div><div class="line"><span class="keyword">if</span> grep -Eqi <span class="string">"CentOS"</span> /etc/issue || grep -Eq <span class="string">"CentOS"</span> /etc/*-release; <span class="keyword">then</span></div><div class="line">    PKM=<span class="string">"yum"</span></div><div class="line"><span class="keyword">elif</span>  grep -Eqi <span class="string">"Ubuntu"</span> /etc/issue || grep -Eq <span class="string">"Ubuntu"</span> /etc/*-release; <span class="keyword">then</span></div><div class="line">    PKM=<span class="string">"apt-get"</span></div><div class="line"><span class="keyword">elif</span>  grep -Eqi <span class="string">"Debian"</span> /etc/issue || grep -Eq <span class="string">"Debian"</span> /etc/*-release; <span class="keyword">then</span></div><div class="line">    PKM=<span class="string">"apt-get"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"This Script must be running at the CentOS or Ubuntu or Debian!"</span></div><div class="line">    <span class="built_in">exit</span> 1</div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"Installing pip with <span class="variable">$PKM</span> ..."</span></div><div class="line"></div><div class="line"><span class="variable">$PKM</span> update</div><div class="line"><span class="variable">$PKM</span> -y install python-pip &amp;&amp; pip install shadowsocks || &#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"install shadowsocks failed"</span></div><div class="line">    <span class="built_in">exit</span> 1</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">read</span> -p <span class="string">"shadowsocks port (default is 8388):"</span> port</div><div class="line"><span class="built_in">read</span> -p <span class="string">"shadowsocks password (default is password):"</span> password</div><div class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$port</span>"</span> ]; <span class="keyword">then</span></div><div class="line">    port=8388</div><div class="line"><span class="keyword">fi</span></div><div class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$password</span>"</span> ]; <span class="keyword">then</span></div><div class="line">    password=<span class="string">"password"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">cat &gt;/etc/shadowsocks.json &lt;&lt;END</div><div class="line">&#123;</div><div class="line">    <span class="string">"server"</span>:<span class="string">"::"</span>,</div><div class="line">    <span class="string">"server_port"</span>:<span class="variable">$port</span>,</div><div class="line">    <span class="string">"local_port"</span>:1080,</div><div class="line">    <span class="string">"password"</span>:<span class="string">"<span class="variable">$password</span>"</span>,</div><div class="line">    <span class="string">"timeout"</span>:600,</div><div class="line">    <span class="string">"method"</span>:<span class="string">"aes-256-cfb"</span></div><div class="line">&#125;</div><div class="line">END</div><div class="line"></div><div class="line">ssserver -c /etc/shadowsocks.json -d start</div><div class="line"></div><div class="line">cat &gt;&gt;/etc/rc.local &lt;&lt;END</div><div class="line">ssserver -c /etc/shadowsocks.json -d start</div><div class="line">END</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"install success"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"port is <span class="variable">$port</span>, password is <span class="variable">$password</span>"</span></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h2 id="二、PPTP"><a href="#二、PPTP" class="headerlink" title="二、PPTP"></a>二、PPTP</h2><blockquote>
<p>仅限ubuntu</p>
</blockquote>
<p>直接安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://raw.githubusercontent.com/junolym/script/master/VPN/pptp.sh &amp;&amp; sudo bash pptp.sh</div></pre></td></tr></table></figure></p>
<p><a class="external" href="https://github.com/junolym/script/blob/master/VPN/pptp.sh" target="_blank">Github</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="keyword">if</span> [ `id -u` -ne 0 ]; <span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"please run it as super user"</span></div><div class="line">    <span class="built_in">exit</span> 0</div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">apt-get -y install pptpd || &#123;</div><div class="line">    apt-get -y update</div><div class="line">    apt-get -y install pptpd</div><div class="line">&#125; || &#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"install pptpd failed"</span></div><div class="line">    <span class="built_in">exit</span> 1</div><div class="line">&#125;</div><div class="line"></div><div class="line">cat &gt;/etc/ppp/options.pptpd &lt;&lt;END</div><div class="line">name pptpd</div><div class="line">refuse-pap</div><div class="line">refuse-chap</div><div class="line">refuse-mschap</div><div class="line">require-mschap-v2</div><div class="line">require-mppe-128</div><div class="line">ms-dns 8.8.8.8</div><div class="line">ms-dns 8.8.4.4</div><div class="line">proxyarp</div><div class="line">lock</div><div class="line">nobsdcomp</div><div class="line">novj</div><div class="line">novjccomp</div><div class="line">nologfd</div><div class="line">END</div><div class="line"></div><div class="line">cat &gt;/etc/pptpd.conf &lt;&lt;END</div><div class="line">option /etc/ppp/options.pptpd</div><div class="line">logwtmp</div><div class="line">localip 192.168.2.1</div><div class="line">remoteip 192.168.2.10-100</div><div class="line">END</div><div class="line"></div><div class="line">cat &gt;&gt; /etc/sysctl.conf &lt;&lt;END</div><div class="line">net.ipv4.ip_forward=1</div><div class="line">END</div><div class="line"></div><div class="line">sysctl -p</div><div class="line"></div><div class="line">iptables-save &gt; /etc/iptables.down.rules</div><div class="line"></div><div class="line">iptables -t nat -A POSTROUTING -s 192.168.2.0/24 -o eth0 -j MASQUERADE</div><div class="line"></div><div class="line">iptables -I FORWARD -s 192.168.2.0/24 -p tcp --syn -i ppp+ -j TCPMSS --<span class="built_in">set</span>-mss 1300</div><div class="line"></div><div class="line">iptables-save &gt; /etc/iptables.up.rules</div><div class="line"></div><div class="line">cat &gt;&gt;/etc/ppp/pptpd-options&lt;&lt;EOF</div><div class="line">pre-up iptables-restore &lt; /etc/iptables.up.rules</div><div class="line">post-down iptables-restore &lt; /etc/iptables.down.rules</div><div class="line">EOF</div><div class="line"></div><div class="line"><span class="built_in">read</span> -p <span class="string">"pptp username (default is test):"</span> username</div><div class="line"><span class="built_in">read</span> -p <span class="string">"pptp password (default is test):"</span> password</div><div class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$username</span>"</span> ]; <span class="keyword">then</span></div><div class="line">    username=<span class="built_in">test</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$password</span>"</span> ]; <span class="keyword">then</span></div><div class="line">    password=<span class="built_in">test</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">cat &gt;/etc/ppp/chap-secrets &lt;&lt;END</div><div class="line"><span class="variable">$username</span> pptpd <span class="variable">$password</span> *</div><div class="line">END</div><div class="line"></div><div class="line">service pptpd restart</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"install success"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"username is <span class="variable">$username</span>, password is <span class="variable">$password</span>"</span></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<h2 id="三、IKEv2"><a href="#三、IKEv2" class="headerlink" title="三、IKEv2"></a>三、IKEv2</h2><p>传送 –&gt;<br><a class="external" href="https://github.com/quericy/one-key-ikev2-vpn" target="_blank" rel="external">Github</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/07/vinzor-exploit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/vinzor-exploit/" itemprop="url">Vinzor云桌面——追求开放与自由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-06T08:32:08+08:00">
                2016-07-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Vinzor云桌面（云晫虚拟课室）采用Ubuntu12.04系统。下面演示在云桌面中传输文件，提权（SU），开放网络访问等操作。另有Linux和Mac远程控制云桌面的方法。</p>
<h2 id="一、访问云桌面挂载的smb磁盘"><a href="#一、访问云桌面挂载的smb磁盘" class="headerlink" title="一、访问云桌面挂载的smb磁盘"></a>一、访问云桌面挂载的smb磁盘</h2><p>通常云桌面会自动挂载一个samba分享磁盘到本地，而开机自动挂载磁盘的命令一般保存在rc.local等开机启动脚本中，因此只要能查看这个脚本，就能够知道这个samba访问的地址、用户名、密码。</p>
<p>如下图，rc.local中第一行就透露了这些信息。另外还有路由和防火墙的设置命令。<img src="/content/images/2016/07/1.jpg" alt=""></p>
<p>在windows访问这个网络磁盘：<br>资源管理器访问<code>\\172.18.215.5\1433****</code>，注意是反斜杠，然后输入学号和密码，即上图中pass=后面的一串<img src="/content/images/2016/07/2.jpg" alt=""><br>Linux和Mac访问地址为<code>smb://172.18.215.5/1433****</code>。</p>
<h2 id="二、提权"><a href="#二、提权" class="headerlink" title="二、提权"></a>二、提权</h2><p>提权是利用Ubuntu的漏洞，由于云桌面系统内核比较老，仍存在提权漏洞。这里利用的是<a href="https://www.exploit-db.com/exploits/37292/" target="_blank" rel="external">37292</a>这个漏洞。<br>其中37292.c这个文件可以传进去，也可以手打，百来行C代码而已。<br><a class="btn btn-download" href="https://www.exploit-db.com/download/37292" target="_blank" rel="external">下载</a></p>
<p>gcc编译运行：此时已开启一个su终端。提权成功。<img src="/content/images/2016/07/3.jpg" alt=""></p>
<p class="warning">提权成功后可以先修改root密码，如无必需，不要修改默认账户的密码。如果修改后无法进入桌面，请修改<code>/etc/xrdp/xrdp.ini</code>中[xrdp1]的<code>password=ask</code>为<code>password=你的密码</code>。<br></p>

<h2 id="三、开放网络访问"><a href="#三、开放网络访问" class="headerlink" title="三、开放网络访问"></a>三、开放网络访问</h2><p>云桌面中网络访问的障碍一般是删除了默认路由和防火墙。当然，前提是云桌面所在的服务器是连上外网的。</p>
<p>以下命令可以开放防火墙<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># iptables -P INPUT ACCEPT</div><div class="line"># iptables -P OUTPUT ACCEPT</div><div class="line"># iptables -P FORWARD ACCEPT</div></pre></td></tr></table></figure></p>
<p>用route命令查看路由表，或者用ifconfig查看路由。然后设置默认路由。如果查看路由表时看到已经有默认路由，省略这一步。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># route add default gw 路由ip地址</div></pre></td></tr></table></figure></p>
<p><img src="/content/images/2016/07/7.jpg" alt=""></p>
<p>检查网络访问：<img src="/content/images/2016/07/8.jpg" alt=""></p>
<h2 id="四、ssh和sftp"><a href="#四、ssh和sftp" class="headerlink" title="四、ssh和sftp"></a>四、ssh和sftp</h2><p>云桌面访问时延迟比较大，而且要配置一个舒服的编程环境比较难，所以开启ssh和sftp访问，就像操作VPS一样舒服。需要安装<a href="http://packages.ubuntu.com/precise/amd64/openssh-server/download" target="_blank" rel="external">openssh-server</a>和<a href="http://packages.ubuntu.com/precise/amd64/openssh-client/download" target="_blank" rel="external">openssh-client</a>。可以传入安装包或者开放网络访问后apt-get。</p>
<p>鼠标悬浮在“云桌面”上可见主机地址。</p>
<p>在windows上可以用winscp和putty连接：<img src="/content/images/2016/07/9.jpg" alt=""></p>
<p>如需使用X11，除参考网上教程设置以外，还需确保<code>sshd_config</code>文件中加上了这一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">X11UseLocalhost no</div></pre></td></tr></table></figure></p>
<p>客户端使用ssh加上-X参数连接便可以在命令行打开图形界面程序：<img src="/content/images/2016/07/----20160717014800.png" alt=""></p>
<h2 id="五、使用其他客户端连接云桌面。"><a href="#五、使用其他客户端连接云桌面。" class="headerlink" title="五、使用其他客户端连接云桌面。"></a>五、使用其他客户端连接云桌面。</h2><p>云桌面的客户端实现的功能其实是获取每个云桌面的独立ip地址并调用windows通用的远程桌面连接，传入ip地址和默认账户密码进行登录。所以可以使用各种客户端登录自己的云桌面。</p>
<p class="note">使用其他客户端连接需要知道自己云桌面的独立ip，鼠标悬浮在“云桌面”上可见主机地址。还需要云桌面内的账户名和密码（不是学号）。</p>

<h3 id="Win10自带的“远程桌面连接”"><a href="#Win10自带的“远程桌面连接”" class="headerlink" title="Win10自带的“远程桌面连接”"></a>Win10自带的“远程桌面连接”</h3><p><img src="/content/images/2016/07/---1.JPG" alt=""></p>
<h3 id="Linux客户端“Remmina”"><a href="#Linux客户端“Remmina”" class="headerlink" title="Linux客户端“Remmina”"></a>Linux客户端“Remmina”</h3><p><img src="/content/images/2016/07/----20160712233251.png" alt=""></p>
<h3 id="Mac客户端"><a href="#Mac客户端" class="headerlink" title="Mac客户端"></a>Mac客户端</h3><p><a class="external" href="https://itunes.apple.com/us/app/microsoft-remote-desktop/id715768417?mt=12" target="_blank" rel="external">Microsoft remote desktop</a></p>
<p>另还有rdesktop等许多客户端可供使用。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/07/fixgrub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/fixgrub/" itemprop="url">Ubuntu Grub引导修复</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-05T13:20:28+08:00">
                2016-07-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Grub引导修复的方法有几种：LiveCD/USB修复、Grub恢复模式修复、Grub4Dos修复等。根据系统启动方式的不同（MBR or EFI），每种方法具体操作不同。本文记录下个人修复的经验。</p>
<h2 id="MBR模式——进入Live系统重安装Grub"><a href="#MBR模式——进入Live系统重安装Grub" class="headerlink" title="MBR模式——进入Live系统重安装Grub"></a>MBR模式——进入Live系统重安装Grub</h2><h3 id="1、找到原系统所在分区"><a href="#1、找到原系统所在分区" class="headerlink" title="1、找到原系统所在分区"></a>1、找到原系统所在分区</h3><p><code>fdisk -l</code>命令列出分区，找到原系统所在分区，下面例子中的/dev/sda7。如果安装系统时单独分出了/boot，也需要找到该分区。</p>
<h3 id="2、执行以下命令"><a href="#2、执行以下命令" class="headerlink" title="2、执行以下命令"></a>2、执行以下命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># mount /dev/sda7 /media/mnt</div><div class="line"># mount /dev/sda8 /media/mnt/boot （如果boot单独分区）</div><div class="line"># chroot /media/mnt</div><div class="line"># grub-install -root-directory=/mnt /dev/sda</div></pre></td></tr></table></figure>
<h2 id="EFI模式——进入Live系统替换EFI文件"><a href="#EFI模式——进入Live系统替换EFI文件" class="headerlink" title="EFI模式——进入Live系统替换EFI文件"></a>EFI模式——进入Live系统替换EFI文件</h2><p><strong>注：本方法要求系统可以启动进入windows，适用于无法手动添加EFI启动项时。</strong></p>
<h3 id="1、挂载EFI分区"><a href="#1、挂载EFI分区" class="headerlink" title="1、挂载EFI分区"></a>1、挂载EFI分区</h3><p>命令<code>fdisk -l</code>列出分区，找到EFI分区号（下面例子中的sda2）并挂载：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># mount /dev/sda2 /media/mnt</div></pre></td></tr></table></figure></p>
<h3 id="2、备份windows的efi文件"><a href="#2、备份windows的efi文件" class="headerlink" title="2、备份windows的efi文件"></a>2、备份windows的efi文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cd /media/mnt/EFI/Microsoft/Boot/</div><div class="line"># cp bootmgfw.efi win.efi</div></pre></td></tr></table></figure>
<h3 id="3、替换ubuntu的efi文件"><a href="#3、替换ubuntu的efi文件" class="headerlink" title="3、替换ubuntu的efi文件"></a>3、替换ubuntu的efi文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cd /media/mnt/EFI/</div><div class="line"># cp ubuntu/grubx64.efi /Microsoft/Boot/bootmgfw.efi</div></pre></td></tr></table></figure>
<p><strong>此时重启，应该可以看到熟悉的Grub画面了。</strong></p>
<h3 id="4、找回windows启动项"><a href="#4、找回windows启动项" class="headerlink" title="4、找回windows启动项"></a>4、找回windows启动项</h3><p>如果刚刚的Grub启动选择菜单中已经有windows启动项，但是无法启动，修改/boot/grub/grub.cfg，将bootmgfw.efi替换为win.efi。</p>
<p>如果Grub启动菜单中没有windows项，可以尝试<code>update-grub</code>命令。</p>
<hr>
<p><em>等待补充</em></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/06/code-line-number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/code-line-number/" itemprop="url">网页代码高亮并显示行号</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-08T09:54:17+08:00">
                2016-06-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="代码高亮-highlight-js"><a href="#代码高亮-highlight-js" class="headerlink" title="代码高亮 highlight.js"></a>代码高亮 highlight.js</h2><p>本站代码高亮的插件来自<a href="https://highlightjs.org/" target="_blank" rel="external">highlight.js</a>。在本页就有实例。使用方法非常简单，推荐以下的做法：</p>
<p>1、在下载页面 <a href="https://highlightjs.org/download/" target="_blank" rel="external">https://highlightjs.org/download/</a> 勾选你想要高亮的语言，然后下载js文件，并放到自己的网站。如果只要使用几种基本的语言，可以直接引用官网给的cdn链接。</p>
<p>2、在demo页面 <a href="https://highlightjs.org/static/demo/" target="_blank" rel="external">https://highlightjs.org/static/demo/</a> 选择喜欢的高亮风格，并下载对应的css文件放到自己的网站，或者引用链接。</p>
<p>3、在页面添加以下html代码启用高亮。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/path/to/styles/default.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/path/to/highlight.pack.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">hljs.initHighlightingOnLoad();</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>4、这时页面上插入的代码应该已经自动高亮了。如果需要指定使用的高亮类型，只需要在<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line"> // markdown语法</div><div class="line"> ```js</div><div class="line"> // 这里插入js代码</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">官方使用说明：https://highlightjs.org/usage/</div><div class="line"></div><div class="line">推荐看看官方的API说明：http://highlightjs.readthedocs.io/en/latest/api.html</div><div class="line"></div><div class="line">## 显示行号 line-numbers </div><div class="line"></div><div class="line">查阅官方的API得知highlight不提供显示行号的功能，需要自己添加。下面分享本站添加行号的方法。添加以下js和css代码：</div><div class="line"></div><div class="line">js：</div><div class="line">```js line-numbers</div><div class="line">$(function() &#123;</div><div class="line">    $(&apos;pre code&apos;).each(function() &#123;</div><div class="line">        var lines = $(this).text().split(&apos;\n&apos;).length - 1;</div><div class="line">        if (lines &lt; 4) return;  // 当行数小于4时不显示行号</div><div class="line">        var $numbering = $(&apos;&lt;ol/&gt;&apos;).addClass(&apos;pre-numbering&apos;);</div><div class="line">        $(this)</div><div class="line">            .addClass(&apos;has-numbering&apos;)</div><div class="line">            .parent()</div><div class="line">            .append($numbering);</div><div class="line">        for(i=1;i&lt;=lines;i++) &#123;</div><div class="line">            $numbering.append($(&apos;&lt;li/&gt;&apos;).text(i));</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>css：<br><figure class="highlight css"><figcaption><span>line-numbers</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">pre</span> &#123;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">code</span><span class="selector-class">.has-numbering</span> &#123;</div><div class="line">    <span class="attribute">margin-left</span>: <span class="number">26px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.pre-numbering</span> &#123;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">width</span>: <span class="number">26px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">9px</span> <span class="number">4px</span>;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#EEE</span>;</div><div class="line">    <span class="attribute">text-align</span>: right;</div><div class="line">    <span class="attribute">font-family</span>: consolas, monospace;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">13pt</span>;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">135%</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#AAA</span>;</div><div class="line">    <span class="attribute">list-style</span>: none;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.pre-numbering</span> <span class="selector-tag">li</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/06/blog-help/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/blog-help/" itemprop="url">技术支持——Ghost博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-08T09:01:53+08:00">
                2016-06-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>本文收集所有使用ghost博客中的学习到的技术和一些心得体会，长期更新</strong></p>
<h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><p>Markdown是Ghost博客使用的编辑文章的语法。关于Markdown的技术文档到处都能找到。例如：<a href="http://support.ghost.org/markdown-guide/" target="_blank" rel="external">http://support.ghost.org/markdown-guide/</a> 。需要注意的是，并不是所有语法Ghost都支持。Ghost官方给了一份很详细的使用说明，基本涵盖了所有常用的Markdown语法。当你搭建好了Ghost博客，这份文档就会是你的第一篇博文。在编辑页面能够很直观地看到Markdown和对应的效果。</p>
<p>这就是那篇默认创建的博文，我一直都留着：<a href="http://chenjx.cn/welcome-to-ghost/">Welcome to Ghost</a>。</p>
<p>使用中可能会忽略的一点是：插入图片的语法是<br><code>![图片名](图片链接)</code>，而如果图片是需要上传的，只要链接留空，就能在编辑框右边的预览框上传图片了。上传后会自动补全链接。</p>
<h2 id="社会化评论框"><a href="#社会化评论框" class="headerlink" title="社会化评论框"></a>社会化评论框</h2><p>本站使用的是<strong>友言</strong>社会化评论框。官网链接：<a href="http://www.uyan.cc/" target="_blank" rel="external">http://www.uyan.cc/</a> 。在官网可以看到介绍和使用说明，嵌入Ghost的方式非常简单，只需要将html代码插入到你所使用的主题里的博客页面，一般是blog.hbs 。</p>
<p>需要注意的是，有许多Ghost的主题采用了单页应用的架构（SPA），例如：<a href="https://github.com/zutrinken/bleak" target="_blank" rel="external">bleak</a>。如果你使用的是这种主题，友言的评论框不会在每一次页面跳转都重新加载。解决的方法是在引入友言的js文件之前加上一句js代码，如下，添加第3行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;!-- UY Begin --&gt;  </div><div class="line">&lt;div id=&quot;uyan_frame&quot;&gt;&lt;/div&gt;  </div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;uyan_loaded = uyan_loadover = undefined&lt;/script&gt;  </div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://v2.uyan.cc/code/uyan.js?uid=&#123;yourID&#125;&quot;&gt;&lt;/script&gt;  </div><div class="line">&lt;!-- UY End --&gt;</div></pre></td></tr></table></figure></p>
<p>另外，同样推荐友言的兄弟：社会分享按钮<a href="http://www.jiathis.com/" target="_blank" rel="external">JiaThis</a>和推荐引擎<a href="http://www.ujian.cc/" target="_blank" rel="external">友荐</a>。</p>
<h2 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h2><p>本站代码高亮的插件来自<a href="https://highlightjs.org/" target="_blank" rel="external">highlight.js</a>。在本页就有实例。使用方法非常简单，推荐以下的做法：</p>
<p>1、在下载页面 <a href="https://highlightjs.org/download/" target="_blank" rel="external">https://highlightjs.org/download/</a> 勾选你想要高亮的语言，然后下载js文件，并放到自己的网站。如果只要使用几种基本的语言，可以直接引用官网给的cdn链接。</p>
<p>2、在demo页面 <a href="https://highlightjs.org/static/demo/" target="_blank" rel="external">https://highlightjs.org/static/demo/</a> 选择喜欢的高亮风格，并下载对应的css文件放到自己的网站，或者引用链接。</p>
<p>3、在页面添加以下html代码启用高亮。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/path/to/styles/default.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/path/to/highlight.pack.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">hljs.initHighlightingOnLoad();</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>4、这时页面上插入的代码应该已经自动高亮了。如果需要指定使用的高亮类型，只需要在<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line"> // markdown语法</div><div class="line"> ```js</div><div class="line"> // 这里插入js代码</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">官方使用说明：https://highlightjs.org/usage/</div><div class="line"></div><div class="line">推荐看看官方的API说明：http://highlightjs.readthedocs.io/en/latest/api.html</div><div class="line"></div><div class="line">**代码显示行号**</div><div class="line"></div><div class="line">查阅官方的API得知highlight不提供显示行号的功能，需要自己添加。本站添加行号的方法请看：[网页代码高亮并显示行号](http://chenjx.cn/code-line-number#linenumbers) </div><div class="line"></div><div class="line">## 标签云</div><div class="line"></div><div class="line">截至发文，标签云是Ghost的实验室功能，默认不启用。需要在设置里开启，如下图：</div><div class="line">![](/content/images/2016/06/----20160608183156.png)</div><div class="line"></div><div class="line">然后在你想要显示标签云的地方加入类似下面的代码：</div><div class="line">```html</div><div class="line">&#123;&#123;#get &quot;tags&quot; limit=&quot;all&quot; include=&quot;count.posts&quot; order=&quot;count.posts desc&quot; &#125;&#125;</div><div class="line">    &#123;&#123;#foreach tags&#125;&#125;</div><div class="line">        &lt;a href=&quot;/tag/&#123;&#123;slug&#125;&#125;&quot; class=&quot;tag-item&quot;&gt;</div><div class="line">        &lt;div&gt;&#123;&#123;name&#125;&#125; (&#123;&#123;count.posts&#125;&#125;)&lt;/div&gt;&lt;/a&gt;</div><div class="line">    &#123;&#123;/foreach&#125;&#125;</div><div class="line">&#123;&#123;/get&#125;&#125;</div></pre></td></tr></table></figure>
<p>注意可能需要重启ghost。然后标签会按照数量和更新时间倒序输出。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://chenjx.cn/2016/06/edslay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱生活，爱的的">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/edslay/" itemprop="url">李安勇毛概复习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-05T09:20:53+08:00">
                2016-06-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-经济学十大原理"><a href="#1-经济学十大原理" class="headerlink" title="1 经济学十大原理"></a>1 经济学十大原理</h2><p><strong>1~4关于作出决策。</strong></p>
<h3 id="1、人们面临权衡取舍"><a href="#1、人们面临权衡取舍" class="headerlink" title="1、人们面临权衡取舍"></a>1、人们面临权衡取舍</h3><p>例如国家收入可以用与国防也可以用于生活（大炮和黄油）。<br>效率和平等之间也是权衡取舍，效率指把蛋糕做大，平等指分割蛋糕。（平等会降低生产积极性）。</p>
<h3 id="2、一种东西的成本是为了得到它所放弃的东西（机会成本）"><a href="#2、一种东西的成本是为了得到它所放弃的东西（机会成本）" class="headerlink" title="2、一种东西的成本是为了得到它所放弃的东西（机会成本）"></a>2、一种东西的成本是为了得到它所放弃的东西（机会成本）</h3><p>例如上大学的成本要包括时间。</p>
<h3 id="3、理性人考虑边际量"><a href="#3、理性人考虑边际量" class="headerlink" title="3、理性人考虑边际量"></a>3、理性人考虑边际量</h3><p>理性=边际利益&gt;边际成本<br>例如飞机即将起飞，原本500元的机票300卖出去也是赚了。因为边际成本只是一顿飞机餐，小于边际利益。<br>同时也解释了物以稀为贵，数量多的东西，即便是必需品，因为少一点也没太大差别，所以便宜。而数量少的，即便不太需要，但是因为太稀缺，所以多一点少一点差别很大。例如水和钻石。  </p>
<h3 id="4、人们会对激励-incentive-作出反应"><a href="#4、人们会对激励-incentive-作出反应" class="headerlink" title="4、人们会对激励(incentive)作出反应"></a>4、人们会对激励(incentive)作出反应</h3><p>激励：引起人们做出某种行为的东西，例如惩罚或奖励。<br>例如：<br>市场商品价格变动引起的行为。<br>汽油税使人开节油型车。<br>安全带——降低了车祸的代价=降低了缓慢驾车的利益=促使司机更快驾车  </p>
<p><strong>5~7关于相互交易</strong></p>
<h3 id="5、贸易能使每个人状况更好"><a href="#5、贸易能使每个人状况更好" class="headerlink" title="5、贸易能使每个人状况更好"></a>5、贸易能使每个人状况更好</h3><p>例子很简单，如果你的家庭不贸易，那么你们需要自己种粮食，做衣服，盖房子。国家贸易和家庭也是类似的。<br>根本：贸易使每个人都可以专门从事自己最擅长的活动。通过交易，可以按较低的成本获得各种各样的物品与劳务。  </p>
<h3 id="6、市场通常是组织经济活动的一种好方法"><a href="#6、市场通常是组织经济活动的一种好方法" class="headerlink" title="6、市场通常是组织经济活动的一种好方法"></a>6、市场通常是组织经济活动的一种好方法</h3><p>看不见的手——价格。<br>价格既反映物品的社会价值，也反映生产该物品的社会成本。<br>指引这些单个买者和卖者的价格调节，在大多数情况下实现了整个社会福利的最大化。<br>税收——扭曲了价格。<br>苏联和东欧的中央计划经济失败——把看不见的手绑起来了。  </p>
<h3 id="7、政府有时可以改善市场结果"><a href="#7、政府有时可以改善市场结果" class="headerlink" title="7、政府有时可以改善市场结果"></a>7、政府有时可以改善市场结果</h3><p>一、只有在政府实施规则并维持市场经济至关重要的制度是，看不见的手才能施展其魔力。最重要的是，只有产权得到保护，市场才能运行。<br>例如餐馆确保客户吃饭付钱才会提供服务；农民确保作物不被偷走才会种。这些都需要政府提供保障。<br>二、看不见的手是强有力的，但不是全能的。<br>效率方面：市场本身不能有效配置资源的情况——市场失灵。（可能原因：外部性、市场力量）在这种情况下（例如存在外部性和市场力量），设计良好的公共政策可以提高经济效率。<br>公平分配方面：市场经济不能确保公平分配经济成果，不能提供基本的食物衣服医疗保障。这时需要公共政策提高公平性。（例如所得税，福利制度）。  </p>
<p><strong>8~10关于整体经济如何运行</strong></p>
<h3 id="8、一国的生活水平取决于它生产物品与劳务的能力"><a href="#8、一国的生活水平取决于它生产物品与劳务的能力" class="headerlink" title="8、一国的生活水平取决于它生产物品与劳务的能力"></a>8、一国的生活水平取决于它生产物品与劳务的能力</h3><p>各国生活水平归咎于生产率的差别——即一个工人一小时生产的物品与劳务数量的差别。  </p>
<h3 id="9、当政府发行过多货币时，物价上升"><a href="#9、当政府发行过多货币时，物价上升" class="headerlink" title="9、当政府发行过多货币时，物价上升"></a>9、当政府发行过多货币时，物价上升</h3><p>通货膨胀。</p>
<h3 id="10、社会面临通货膨胀与失业之间的短期权衡取舍"><a href="#10、社会面临通货膨胀与失业之间的短期权衡取舍" class="headerlink" title="10、社会面临通货膨胀与失业之间的短期权衡取舍"></a>10、社会面临通货膨胀与失业之间的短期权衡取舍</h3><p>长期而言，物价水平高是货币量增加的结果。<br>短期而言，货币注入带来购买力的增长，刺激了物品和劳务的需求。高需求刺激了价格上涨，同时也促使更多地生产。进而需要更多地雇佣工人。</p>
<h2 id="2-弹性及其应用-（Topic2-3）"><a href="#2-弹性及其应用-（Topic2-3）" class="headerlink" title="2 弹性及其应用 （Topic2~3）"></a>2 弹性及其应用 （Topic2~3）</h2><h3 id="需求价格弹性："><a href="#需求价格弹性：" class="headerlink" title="需求价格弹性："></a>需求价格弹性：</h3><p>需求量对价格变动的反应程度。反应很大说明富有弹性。<br>相关：<strong>相近替代品的可获得性</strong>；<strong>必需品与奢侈品</strong>；<strong>市场的定义</strong>（范围大小，例如食物缺乏弹性，冰淇淋富有弹性）；<strong>时间框架</strong>（长期更有弹性）。  </p>
<h3 id="供给价格弹性："><a href="#供给价格弹性：" class="headerlink" title="供给价格弹性："></a>供给价格弹性：</h3><p>供给量对价格变动的反应程度。  </p>
<h3 id="分析应用"><a href="#分析应用" class="headerlink" title="分析应用"></a>分析应用</h3><p>画出价格（纵坐标）与数量（横坐标）的供给和需求两条曲线。交点处为交易的数量和价格。一种政策会改变价格或者数量，从而使曲线移动。分析时注意考虑商品的需求弹性供给弹性有短期和长期的差别。  </p>
<h3 id="禁毒是降低了毒品犯罪还是增加"><a href="#禁毒是降低了毒品犯罪还是增加" class="headerlink" title="禁毒是降低了毒品犯罪还是增加"></a>禁毒是降低了毒品犯罪还是增加</h3><p>禁毒教育减少了毒品需求，但是禁毒行动提高了毒品的价格。结论：禁毒在短期中增加了与毒品相关的犯罪，而在长期中会减少这种犯罪。</p>
<h2 id="3-消费者、生产者与市场效率（Topic4）"><a href="#3-消费者、生产者与市场效率（Topic4）" class="headerlink" title="3 消费者、生产者与市场效率（Topic4）"></a>3 消费者、生产者与市场效率（Topic4）</h2><p><strong>福利经济学</strong>：资源配置如何影响经济福利。<br>结论：供求均衡可以使买者和卖者的总利益最大化。  </p>
<h3 id="消费者剩余"><a href="#消费者剩余" class="headerlink" title="消费者剩余"></a>消费者剩余</h3><p>对消费者而言，<strong>支付意愿</strong>减去实际支付的费用就是消费者剩余。<br><strong>需求曲线</strong>以下和价格以上部分的面积就是消费者剩余。<br>价格降低增加了消费者剩余。消费者剩余衡量了消费者得到的福利。</p>
<h3 id="生产者剩余"><a href="#生产者剩余" class="headerlink" title="生产者剩余"></a>生产者剩余</h3><p>对生产者而言，卖出商品得到的量减去生产成本就是生产者剩余。<br><strong>供给曲线</strong>以上和价格以下部分的面积就是生产者剩余。</p>
<h3 id="市场效率"><a href="#市场效率" class="headerlink" title="市场效率"></a>市场效率</h3><p><strong>总剩余</strong>=买者的意愿-卖者的成本</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p><strong>肾脏器官交易合法化的利与弊</strong><br>利：使社会总剩余提高；弊：会使人认为损害了穷人的利益和造福了富人</p>
<p><strong>黄牛</strong>——供给和需求在路边相遇</p>
<h2 id="4-外部性-Topic7-8"><a href="#4-外部性-Topic7-8" class="headerlink" title="4 外部性 Topic7~8"></a>4 外部性 Topic7~8</h2><p>外部性是一种市场失灵。当一个人从事一种影响旁观者福利，而对这种影响既不付报酬又得不到报酬，就产生了<strong>外部性</strong>。影响的正负产生了正的外部性和负的外部性。当存在外部性时，社会对市场结果的关注扩大到买者与卖者的福利之外，还要包括间接受影响的旁观者的福利。而旁观者的福利不在买者和卖着决定需求或供给考虑之内。这时候需要政府的干预解决市场失灵。</p>
<h3 id="外部性与市场效率"><a href="#外部性与市场效率" class="headerlink" title="外部性与市场效率"></a>外部性与市场效率</h3><p><strong>负的外部性</strong>增加了生产商品的<strong>社会成本</strong>，从而使市场的<strong>总剩余</strong>减少。<br>解决方法——<strong>外部性内在化</strong>：税收</p>
<p><strong>正的外部性</strong>增加了<strong>社会意愿</strong>的数量，所以增加了<strong>总剩余</strong>。<br>例如教育带来的正的外部性。所以政府采取<strong>补贴</strong>的政策。</p>
<h3 id="外部性的私人解决办法"><a href="#外部性的私人解决办法" class="headerlink" title="外部性的私人解决办法"></a>外部性的私人解决办法</h3><p>道德约束，慈善行为，签订合同都属于私人解决办法。</p>
<p><strong>科斯定理</strong>：如果私人各方可以无成本地就资源配置进行协商，那么私人市场总能解决外部性问题，并有效地配置资源。<br>例子：养狗的人从中获得快乐，而被狗吵到的邻居减少了快乐。如果要使总快乐增加，可以让他们协商。如果被狗吵的邻居减少的快乐比养狗的人获得的多，那么只需要被吵的邻居支付一笔前让其放弃养狗，这样双方都会更快乐。而如果被吵的邻居减少的快乐并没有养狗的人获得的多，那么只需要保持不变。由此可以看出协商可以使资源配置最有效。</p>
<p><strong>为什么私人解决不总是有效</strong>：科斯定理的前提是协商无成本，当协商成本大的时候私人解决就无效了。例如养狗的人和他的邻居讲不同的语言，他们协商需要请一个翻译。那么就可能失效了。</p>
<h3 id="针对外部性的公共政策"><a href="#针对外部性的公共政策" class="headerlink" title="针对外部性的公共政策"></a>针对外部性的公共政策</h3><p><strong>管制</strong><br><strong>矫正</strong>——税收和补贴</p>
<h2 id="5-微观经济学前沿（Topic13）"><a href="#5-微观经济学前沿（Topic13）" class="headerlink" title="5 微观经济学前沿（Topic13）"></a>5 微观经济学前沿（Topic13）</h2><h3 id="不对称信息"><a href="#不对称信息" class="headerlink" title="不对称信息"></a>不对称信息</h3><p>信息不对称——隐蔽性行为和隐蔽性特征。没有信息的一方都想知道相关信息，但有信息的一方想掩盖这些信息。</p>
<p><strong>隐蔽性行为</strong>：委托人、代理人及道德风险。<br>雇佣关系中，代理人可能会作出不道德的行为，而委托人就要想尽办法鼓励代理人更负责地行事。方法：<strong>提高监督</strong>，<strong>高工资</strong>，<strong>延期支付</strong>。</p>
<p><strong>隐蔽性特征</strong>：逆向选择和次品问题。<br>逆向选择是卖者对所出售的物品了解得比买者多的产生的问题。所谓逆向，就是指卖者出售物品的选择可能是逆向的。例如二手车市场、劳动市场、保险市场。</p>
<p><strong>为传递私人信息发信号</strong><br>广告……</p>
<p><strong>引起信息披露的筛选</strong><br>考试、学位……</p>
<p><strong>不对称信息与公共政策</strong><br>例如道德风险和逆向选择，可能要求政府有所作为。</p>
<h3 id="政治经济学（公共选择学）"><a href="#政治经济学（公共选择学）" class="headerlink" title="政治经济学（公共选择学）"></a>政治经济学（公共选择学）</h3><p><strong>塞尔多投票悖论</strong>——多数投票本身并没有告诉我们社会真正想要什么结果。</p>
<p><strong>阿罗不可能性定理</strong>——没有一种投票制度能够满足一个好的投票方案所需的几个条件：<strong>确定性</strong>（如果每个人都偏好A，则A击败了B），<strong>传递性</strong>（如果A击败了B而B击败了C，则A击败了C）<strong>不相关选择的独立性</strong>（A和B之间的排序不应取决于是否还可以得到某个第三种结果C），<strong>没有独裁者</strong>（无论其他每个人的偏好如何，没有一个人总能获胜）。</p>
<p><strong>中值选民说了算</strong></p>
<h3 id="行为经济学"><a href="#行为经济学" class="headerlink" title="行为经济学"></a>行为经济学</h3><p><strong>人并不总是理性的</strong></p>
<p>过分自信<br>过分重视从现实生活中观察到的细枝末节<br>不愿改变自己的观念</p>
<p><strong>人关注公正</strong></p>
<p><strong>人有时是矛盾的</strong><br>想减肥的人面对甜点可能管不住嘴。</p>
<h2 id="6-经济增长（宏观经济学）"><a href="#6-经济增长（宏观经济学）" class="headerlink" title="6 经济增长（宏观经济学）"></a>6 经济增长（宏观经济学）</h2><p>略。</p>
<h2 id="简答题例题"><a href="#简答题例题" class="headerlink" title="简答题例题"></a>简答题例题</h2><h3 id="1-上大学是为了获得知识，那为什么获得学位同样重要？"><a href="#1-上大学是为了获得知识，那为什么获得学位同样重要？" class="headerlink" title="1. 上大学是为了获得知识，那为什么获得学位同样重要？"></a>1. 上大学是为了获得知识，那为什么获得学位同样重要？</h3><p><strong>信息不对称</strong>：你获得了知识，但是用人单位要知道你的能力，需要通过一些<strong>信号、标签</strong>。</p>
<h3 id="2-路边经常出现很多垃圾，为什么家里没有？"><a href="#2-路边经常出现很多垃圾，为什么家里没有？" class="headerlink" title="2. 路边经常出现很多垃圾，为什么家里没有？"></a>2. 路边经常出现很多垃圾，为什么家里没有？</h3><p>路边是公共的，没有人会care。<strong>外部性</strong>：资源是公共所有还是私人所有</p>
<h2 id="论述题例题"><a href="#论述题例题" class="headerlink" title="论述题例题"></a>论述题例题</h2><h3 id="1-中国和欧美的模式差异，中国为什么从计划经济走向市场经济or为什么市场经济配置资源更有效？"><a href="#1-中国和欧美的模式差异，中国为什么从计划经济走向市场经济or为什么市场经济配置资源更有效？" class="headerlink" title="1. 中国和欧美的模式差异，中国为什么从计划经济走向市场经济or为什么市场经济配置资源更有效？"></a>1. 中国和欧美的模式差异，中国为什么从计划经济走向市场经济or为什么市场经济配置资源更有效？</h3><h3 id="2-既然市场经济这么好，那为什么还需要政府？"><a href="#2-既然市场经济这么好，那为什么还需要政府？" class="headerlink" title="2. 既然市场经济这么好，那为什么还需要政府？"></a>2. 既然市场经济这么好，那为什么还需要政府？</h3><p>市场经济的局限性，有时候需要政府出手。</p>
<h3 id="3-当需要政府的时候，怎么能确保政府所做的决策是正确的？"><a href="#3-当需要政府的时候，怎么能确保政府所做的决策是正确的？" class="headerlink" title="3. 当需要政府的时候，怎么能确保政府所做的决策是正确的？"></a>3. 当需要政府的时候，怎么能确保政府所做的决策是正确的？</h3><p>靠规则、制度。</p>
<h3 id="4-为什么大家都知道环保很重要，政府也一再强调，但为什么环保问题依然严重？"><a href="#4-为什么大家都知道环保很重要，政府也一再强调，但为什么环保问题依然严重？" class="headerlink" title="4. 为什么大家都知道环保很重要，政府也一再强调，但为什么环保问题依然严重？"></a>4. 为什么大家都知道环保很重要，政府也一再强调，但为什么环保问题依然严重？</h3><p>排放污染物的企业没有受到应有的惩罚。——制度缺陷</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Robin Chen" />
          <p class="site-author-name" itemprop="name">Robin Chen</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Robin Chen</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
